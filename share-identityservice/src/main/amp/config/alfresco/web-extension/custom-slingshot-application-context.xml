<?xml version='1.0' encoding='UTF-8'?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xsi:schemaLocation="http://www.springframework.org/schema/beans
                http://www.springframework.org/schema/beans/spring-beans-2.5.xsd">

   <!-- Add module specific messages and labels -->
   <bean id="org.alfresco.security.authentication.identityservice.resources"
         class="org.springframework.extensions.surf.util.ResourceBundleBootstrapComponent">
      <property name="resourceBundles">
         <list>
            <value>alfresco.web-extension.messages.identityservice</value>
         </list>
      </property>
   </bean>

   <!--<bean id="identityServiceController" class="org.alfresco.web.site.servlet.identityservice.IdentityServiceController"></bean>-->

   <!-- Override Slingshot's & Web Framework Abstract Handler Mappings -->
   <!--<bean id="webframeworkHandlerMappings" class="org.springframework.web.servlet.handler.SimpleUrlHandlerMapping" abstract="true">
      <property name="urlPathHelper" ref="urlPathHelper" />
      <property name="pathMatcher" ref="pathMatcher" />
      <property name="interceptors">
         <list>
            <ref bean="requestContextInterceptor"/>
            <ref bean="userDashboardInterceptor"/>
            <ref bean="editionInterceptor"/>
         </list>
      </property>
      <property name="mappings">
         <value>
            /system/**=remoteController
            /proxy/**=endpointController
            /resource/**=resourceController
            /feed/**=feedController
            /dologin/**=loginController
            /dologout/**=logoutController
            /generator/**=generatorController
            /identity-service/login**=identityServiceController
         </value>
      </property>
   </bean>-->

   <bean id="identityServicePropertiesService"
         class="org.alfresco.web.site.servlet.identityservice.config.IdentityServicePropertiesService">
      <property name="enabled" value="${keycloak.enabled}" />
      <property name="realm" value="${keycloak.realm}" />
      <property name="authServerUrl" value="${keycloak.auth-server-url}" />
   </bean>

   <bean id="webscript.org.alfresco.components.identityservice.guest.loginurl.get"
         class="org.alfresco.components.identityservice.guest.LoginUrlGet"
         parent="webscript">
      <property name="identityServicePropertiesService" ref="identityServicePropertiesService" />
   </bean>
</beans>